# -*- rpm-spec -*-
BuildRoot:      @CPACK_RPM_DIRECTORY@/@CPACK_PACKAGE_FILE_NAME@
Summary:        @CPACK_RPM_PACKAGE_SUMMARY@
Name:           @CPACK_RPM_PACKAGE_NAME@
Version:        @CPACK_RPM_PACKAGE_VERSION@
Release:        @CPACK_RPM_PACKAGE_RELEASE@
License:        @CPACK_RPM_PACKAGE_LICENSE@
Group:          @CPACK_RPM_PACKAGE_GROUP@
Vendor:         @CPACK_RPM_PACKAGE_VENDOR@
@TMP_RPM_URL@
@TMP_RPM_REQUIRES@
@TMP_RPM_PROVIDES@
@TMP_RPM_OBSOLETES@
@TMP_RPM_BUILDARCH@
@TMP_RPM_PREFIX@

%define _rpmdir @CPACK_RPM_DIRECTORY@
%define _rpmfilename @CPACK_RPM_FILE_NAME@
%define _unpackaged_files_terminate_build 0
%define _topdir @CPACK_RPM_DIRECTORY@
@TMP_RPM_SPEC_INSTALL_POST@
@CPACK_RPM_SPEC_MORE_DEFINE@
@CPACK_RPM_COMPRESSION_TYPE_TMP@

%description
@CPACK_RPM_PACKAGE_DESCRIPTION@

# This is a shortcutted spec file generated by CMake RPM generator
# we skip _install step because CPack does that for us.
# We do only save CPack installed tree in _prepr
# and then restore it in build.
%prep
mv $RPM_BUILD_ROOT "@CPACK_TOPLEVEL_DIRECTORY@/tmpBBroot"

#p build

%install
if [ -e $RPM_BUILD_ROOT ];
then
  mv "@CPACK_TOPLEVEL_DIRECTORY@/tmpBBroot/*" $RPM_BUILD_ROOT
else
  mv "@CPACK_TOPLEVEL_DIRECTORY@/tmpBBroot" $RPM_BUILD_ROOT
fi

%clean

%post
@CPACK_RPM_SPEC_POSTINSTALL@

%postun
@CPACK_RPM_SPEC_POSTUNINSTALL@

%pre
@CPACK_RPM_SPEC_PREINSTALL@

%preun
@CPACK_RPM_SPEC_PREUNINSTALL@

%files
%defattr(-,root,root,-)
"/usr/sbin/infod"
"/usr/sbin/infod-ctl"
"/usr/share/doc/gossimon/mmon.conf.sample"
"/usr/share/doc/gossimon/Copyright.txt"
"/usr/share/doc/gossimon/Readme.txt"
"/usr/share/doc/gossimon/infod.default-args"
"/usr/share/doc/gossimon/infod.conf.sample"
"/usr/share/doc/gossimon/infod.rc"
"/usr/share/man/man8/infod-ctl.8.gz*"
"/usr/share/man/man8/infod.8.gz*"
"/usr/share/man/man1/infod-best.1.gz*"
"/usr/share/man/man1/repeat-bg.1.gz*"
"/usr/share/man/man1/mmon.1.gz*"
"/usr/share/man/man1/testload.1.gz*"
"/usr/share/man/man1/infod-client.1.gz*"
"/usr/bin/infod-client"
"/usr/bin/infod-best"
"/usr/bin/repeat-bg"
"/usr/bin/mmon"
"/usr/bin/testload"
"/etc/gossimon/plugins-available/README"
"/etc/gossimon/plugins-enabled/README"

%config(noreplace) "/etc/gossimon/mmon.conf"
%config "/etc/init.d/infod"
%config(noreplace) "/etc/gossimon/infod.conf"
%config(noreplace) "/etc/gossimon/infod.map"
%config(noreplace) "/etc/default/infod"


%changelog
@CPACK_RPM_SPEC_CHANGELOG@
